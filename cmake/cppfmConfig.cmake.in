@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# macOS OpenMP needs explicit configuration for Homebrew's libomp
if(APPLE)
    if(NOT DEFINED OpenMP_ROOT)
        set(OpenMP_ROOT "/opt/homebrew/opt/libomp")
    endif()
    set(OpenMP_C_FLAGS "-Xpreprocessor -fopenmp -I${OpenMP_ROOT}/include")
    set(OpenMP_CXX_FLAGS "-Xpreprocessor -fopenmp -I${OpenMP_ROOT}/include")
    set(OpenMP_C_LIB_NAMES "omp")
    set(OpenMP_CXX_LIB_NAMES "omp")
    set(OpenMP_omp_LIBRARY "${OpenMP_ROOT}/lib/libomp.dylib")
endif()

# macOS TBB from Homebrew
if(APPLE AND NOT DEFINED TBB_ROOT)
    set(TBB_ROOT "/opt/homebrew/opt/tbb")
endif()

# find dependencies
find_dependency(Boost REQUIRED)
find_dependency(OpenMP REQUIRED)
find_dependency(TBB REQUIRED)

include("${CMAKE_CURRENT_LIST_DIR}/cppfmTargets.cmake")
check_required_components(cppfm)
